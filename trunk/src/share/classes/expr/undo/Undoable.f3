package expr.undo;
import f3.lang.Ref;

public class Undoable of a 
{
    public var target is Ref of a;
    public var value is a;
    public var tag is String;
    public function apply
    {
	target.set(value);
    }
    public function isDirty to Boolean 
    {
	value <> target.get();
    }
}

public function make of a from (tag is String, ptr is Ref of a) to Undoable of a 
{
    Undoable of a {
	tag: tag;
	target: ptr;
	value: ptr.get();
    }
}


